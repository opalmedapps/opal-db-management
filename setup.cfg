[flake8]
format = wemake
show-violation-links = true
show-source = true
statistics = false
enable-extensions = G

max-line-length = 120
max-complexity = 6
max-module-members = 8


exclude =
    .tox
    .git
    .venv
    __py_cache__
    */static/CACHE/
    site
    requirements/
    db-scripts/
    config/
    db_management/opaldb/revision_data
    db_management/opaldb/versions/85a1cf55990c_generate_opaldb_tables.py
    # TODO: Eventually we should go through this autogenerated file and make it conformant with the code quality tools
    db_management/opaldb/models.py
ignore=
    F821,
    # ignore line-break before operator error (to report only line-break after)
    # see: https://gitlab.com/pycqa/flake8/-/issues/466
    W503,
    # ignore missing docstring in public package (__init__.py)
    D104,
    # ignore upper case constant
    WPS115,
    # f strings arent bad
    WPS305,
    # print lines for verbose logging info
    WPS421,
    # Too many module imports
    WPS235,
per-file-ignores=
    # ignore too many members
    # ignore block variables overlap
    # ignore incorrect module name pattern
    # ignore high jones complexity
    # ignore incorrect multiline string usage
    # ignore file name too long
    # ignore string literal overuse
    */versions/*.py: WPS210, WPS440, WPS102, I001, D400, WPS432, WPS221, WPS118, WPS226, WPS204, WPS213
    # Temp CI pipeline fix: Ignore isort errors in env.py file, only happens when running in the CI pipeline for some reason
    */env.py: I004, I001
    # Isort conflicts with flake8 somehow for module imports
    */insert_test_data.py: WPS318, WPS319

[isort]
known_firstparty = db_management
sections = FUTURE,STDLIB,THIRDPARTY,FIRSTPARTY,LOCALFOLDER
line_length = 120
skip = .venv
include_trailing_comma = true
use_parentheses = true
# vertical hanging
# See: https://github.com/PyCQA/isort#multi-line-output-modes
multi_line_output = 3

[mypy]
# ignore errors on mypy type comment (# type: ignore[attr-defined]):
    # see: https://github.com/PyCQA/pyflakes/issues/373
python_version = 3.10
ignore_missing_imports = True
strict_equality = True
show_error_codes = True
warn_return_any = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_unused_configs = True

disallow_untyped_calls = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_decorators = True
check_untyped_defs = True
