[flake8]
format = wemake
show-violation-links = true
show-source = true
statistics = false
enable-extensions = G

max-line-length = 120
max-complexity = 6
max-module-members = 8


exclude =
    .tox
    .git
    .venv
    __py_cache__
    */static/CACHE/
    site
    requirements/
    db-scripts/
    config/
    db_management/opaldb/revision_data
    db_management/opaldb/versions/2023_03_31-85a1cf55990c_generate_opaldb_tables.py
    db_management/questionnairedb/versions/2023_05_19-a8a23f24d61b_generate_questionnairedb_tables.py
    db_management/ormsdb/versions/2023_05_31-da79ad032892_generate_ormsdb_tables.py
    db_management/ormslogdb/versions/2023_06_05-07f067b25688_generate_ormslogdb_tables.py
    # TODO: Eventually we should go through this autogenerated file and make it conformant with the code quality tools
    db_management/opaldb/models.py
    db_management/questionnairedb/models.py
    db_management/ormsdb/models.py
    db_management/ormslogdb/models.py
ignore=
    F821,
    # ignore line-break before operator error (to report only line-break after)
    # see: https://gitlab.com/pycqa/flake8/-/issues/466
    W503,
    # ignore missing docstring in public package (__init__.py)
    D104,
    # ignore upper case constant
    WPS115,
    # f strings arent bad
    WPS305,
    # print lines for verbose logging info
    WPS421,
    # Too many module imports
    WPS235,
    # Missing base class
    WPS306,
per-file-ignores=
    # ignore too many members
    # ignore block variables overlap
    # ignore incorrect module name pattern
    # ignore high jones complexity
    # ignore incorrect multiline string usage
    # ignore file name too long
    # ignore string literal overuse
    */versions/*.py: WPS210, WPS440, WPS102, D400, WPS432, WPS221, WPS118, WPS226, WPS204, WPS213
    # ignore line too long in trigger lists
    */revision_data/*.py: E501,WPS102, WPS322, WPS319
    # ignore name shadowing a builtin
    # ignore parameter not access
    # ignore unknown target name type
    db_management/opaldb/env.py: WPS125, A002,  RST306,
    # Tests
    #
    # - Allow missing docstring in public module (D100)
    # - Allow missing docstring for function (D103)
    # - Allow longer function names (WPS118)
    # - Ignore expression overuse (WPS204)
    # - Ignore `Found too many local variables:` for tests (WPS210)
    # - Allow too many arguments in test functions due to pytest fixtures (WPS211)
    # - Allow calling private functions/methods to test them directly (WPS437)
    # - Enable `assert` keyword and magic numbers for tests (DAR101, S101, WPS432)
    # - Ignore `Found too many methods:` for tests (WPS214)
    # - Ignore too many `assert` statements for tests (WPS218)
    # - Allow use control variable after block (WPS441)
    # - Allow outer scope names shadowing (WPS442)
    # - Ignore too many empty lines (WPS473)
    tests/*.py: D100, D103, DAR101, S101, WPS118, WPS204, WPS210, WPS211, WPS214, WPS432, WPS437, WPS218, WPS441, WPS442, WPS473
[isort]
known_firstparty = db_management
sections = FUTURE,STDLIB,THIRDPARTY,FIRSTPARTY,LOCALFOLDER
line_length = 120
skip = .venv
include_trailing_comma = true
use_parentheses = true
# vertical hanging
# See: https://github.com/PyCQA/isort#multi-line-output-modes
multi_line_output = 3

[mypy]
# ignore errors on mypy type comment (# type: ignore[attr-defined]):
    # see: https://github.com/PyCQA/pyflakes/issues/373
python_version = 3.11
ignore_missing_imports = True
strict_equality = True
show_error_codes = True
warn_return_any = True
warn_unused_ignores = True
warn_redundant_casts = True
warn_unused_configs = True

disallow_untyped_calls = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
disallow_untyped_decorators = True
check_untyped_defs = True
